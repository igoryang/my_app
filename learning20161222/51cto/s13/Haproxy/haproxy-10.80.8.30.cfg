#---------------------------------------------------------------------

# Global settings
#---------------------------------------------------------------------
global
    log         127.0.0.1 local2

    chroot      /var/lib/haproxy
    pidfile     /var/run/haproxy.pid
    maxconn     20480
    user        haproxy
    group       haproxy
    daemon

    # turn on stats unix socket
    stats socket /var/lib/haproxy/stats

#---------------------------------------------------------------------
# common defaults that all the 'listen' and 'backend' sections will
# use if not designated in their block
#---------------------------------------------------------------------
defaults
    mode                    http
    log                     global
#    option                  httplog
    option                  dontlognull
    option http-server-close
#    option forwardfor       except 127.0.0.0/8
    option                  redispatch
    retries                 3
    timeout http-request    10s
    timeout queue           1m
    timeout connect         10s
    timeout client          1m
    timeout server          1m
    timeout http-keep-alive 10s
    timeout check           10s
    maxconn                 10000

#---------------------------------------------------------------------
# main frontends
#---------------------------------------------------------------------
frontend http_80_in
bind 0.0.0.0:80
        option httplog
        option forwardfor
        option httpclose
        option forwardfor header Client-IP
        capture request header Host len 40
        capture request header User-Agent len 16
        capture request header Referer len 200
        capture request header Content-Length len 10
        capture response header Server len 40
        capture response header Content-Length len 10
        capture response header Cache-Control len 8


	
	#acl is_websocket hdr(Upgrade) -i WebSocket
	#acl is_websocket hdr_beg(Host) -i ws

	redirect scheme https code 301 if { hdr(Host) -i member.zhaogang.com } !{ ssl_fc }
	redirect prefix http://logquery.ops.zhaogangren.com if { hdr(Host) -i log.arch.zhaogangren.com }

	# level 5 
	acl is_processing_order_warehouse_zhaogangren_com hdr_dom(host) -i processing.order.warehouse.zhaogangren.com
	acl is_module_common_domain_zhaogang_com hdr_dom(host) -i module.common.domain.zhaogang.com
        acl is_api_processoms_wp_zhaogang_com hdr_dom(host) -i api.processoms.wp.zhaogang.com  
	acl is_api_creditaudit_finance_zhaogang_com hdr_dom(host) -i api.creditaudit.finance.zhaogang.com
	acl is_socialwarehouse_ui_warehouse_zhaogangren_com  hdr_dom(host) -i socialwarehouse.ui.warehouse.zhaogangren.com
	acl is_socialwarehouse_service_warehouse_zhaogangren_com  hdr_dom(host) -i socialwarehouse.service.warehouse.zhaogangren.com
        acl is_trading_sales_zhaogangren_com hdr_dom(host) -i trading.sales.zhaogangren.com
        acl is_maven_zhaogangren_com_nexus path_beg -i /nexus/
	acl is_api_config_arch_zhaogangren_com  hdr_dom(host) -i api.config.arch.zhaogangren.com
	acl is_cloud_finance_warehouse_zgcorp_zg hdr_dom(host) -i cloud.finance.warehouse.zgcorp.zg
        acl is_wms_supplierchain_domain_zhaogang_com hdr_dom(host) -i wms.supplierchain.domain.zhaogang.com
        acl is_wms_supplierchain_application_zhaogang_com hdr_dom(host) -i wms.supplierchain.application.zhaogang.com
        acl is_cache_common_application_zhaogang_com hdr_dom(host) -i cache.common.application.zhaogang.com
        acl is_module_common_application_zhaogang_com hdr_dom(host) -i module.common.application.zhaogang.com
        acl is_cache_common_domain_zhaogang_com hdr_dom(host) -i cache.common.domain.zhaogang.com
        acl is_api_notification_monitor_zhaogang_com hdr_dom(host) -i api.notification.monitor.zhaogang.com
        acl is_manager_iou_fund_pangmaobao_com hdr_dom(host) -i manager.iou.fund.pangmaobao.com





	# level 4
	acl is_notify_arch_zgcorp_zg  hdr_dom(host) -i notify.arch.zgcorp.zg
	acl is_baseinfo_warehouse_zhaogangren_com hdr_dom(host) -i baseinfo.warehouse.zhaogangren.com
	acl is_seclog_arch_zhaogangren_com hdr_dom(host) -i seclog.arch.zhaogangren.com
	acl is_baseinfo_warehouse_zgcorp_zg  hdr_dom(host) -i baseinfo.warehouse.zgcorp.zg
	acl is_tinyq_arch_zhaogangren_com hdr_dom(host) -i tinyq.arch.zhaogangren.com
	acl is_config_arch_zhaogangren_com hdr_dom(host) -i config.arch.zhaogangren.com
        acl is_api_jiagong_zhaogang_com hdr_dom(host) -i api.jiagong.zhaogang.com 
        acl is_processing_jiagong_zhaogang_com hdr_dom(host) -i processing.jiagong.zhaogang.com 
        acl is_wms_webresource_zhaogang_com hdr_dom(host) -i wms.webresource.zhaogang.com 
	acl is_soa_logistics_zgcorp_zg hdr_dom(host) -i soa.logistics.zgcorp.zg
        acl is_processoms_wp_zhaogang_com hdr_dom(host) -i processoms.wp.zhaogang.com  
        acl is_app_data_zhaogang_com hdr_dom(host) -i app.data.zhaogang.com  
        acl is_creditaudit_finance_zhaogang_com hdr_dom(host) -i creditaudit.finance.zhaogang.com
        acl is_crm_logistics_zhaogangren_com hdr_dom(host) -i crm.logistics.zhaogangren.com
        acl is_truckcenter_logistics_zhaogangren_com hdr_dom(host) -i truckcenter.logistics.zhaogangren.com
        acl is_log_arch_zhaogangren_com hdr_dom(host) -i log.arch.zhaogangren.com
        #acl is_logquery_ops_zhaogangren_com  hdr_dom(host) -i logquery.ops.zhaogangren.com 
        acl is_job_arch_zhaogangren_com hdr_dom(host) -i job.arch.zhaogangren.com
        acl is_support_zhaogangren_com hdr_dom(host) -i support.zhaogangren.com
        acl is_analyticslog_arch_zhaogangren_com hdr_dom(host) -i analyticslog.arch.zhaogangren.com
        acl is_analytics_arch_zhaogang_com hdr_dom(host) -i analytics.arch.zhaogang.com
	acl is_portal_warehouse_zhaogangren_com  hdr_dom(host) -i portal.warehouse.zhaogangren.com
	acl is_authentication_logistics_zgcorp_zg hdr_dom(host) -i authentication.logistics.zgcorp.zg
        acl is_crm_wp_zhaogang_com hdr_dom(host) -i crm.wp.zhaogang.com
        acl is_wms_api_zhaogang_com hdr_dom(host) -i wms.api.zhaogang.com
        acl is_api_wp_zhaogang_com_innersso path_beg -i /innersso
        acl is_api_wp_zhaogang_com_sso path_beg -i /sso
        acl is_wms_supplierchain_zhaogang_com hdr_dom(host) -i wms.supplierchain.zhaogang.com
        acl is_rc_soa_zhaogang_com hdr_dom(host) -i rc.soa.zhaogang.com
        acl is_job_cloud_zhaogangren_com hdr_dom(host) -i job.cloud.zhaogangren.com
        acl is_trade_mq_zhaogang_com hdr_dom(host) -i trade.mq.zhaogang.com
        acl is_oms_zhaogangren_com hdr_dom(host) -i oms.zhaogangren.com
        acl is_ftp_oms_zhaogangren_com hdr_dom(host) -i ftp.oms.zhaogangren.com
        acl is_ftp_loaning_zhaogangren_com hdr_dom(host) -i ftp.loaning.zhaogangren.com
        acl is_ftp_qualityassurance_zhaogangren_com hdr_dom(host) -i ftp.qualityassurance.zhaogangren.com
        acl is_ftp_warehouse_zhaogangren_com hdr_dom(host) -i ftp.warehouse.zhaogangren.com
        acl is_ftp_match_upload_zhaogangren_com hdr_dom(host) -i ftp.match_upload.zhaogangren.com
        acl is_ftp_portal_zhaogangren_com hdr_dom(host) -i ftp.portal.zhaogangren.com
        acl is_ftp_resparse_zhaogangren_com hdr_dom(host) -i ftp.resparse.zhaogangren.com
        acl is_ftp_WarehouseProcessOMS_zhaogangren_com hdr_dom(host) -i ftp.WarehouseProcessOMS.zhaogangren.com
        acl is_ftp_xiaoxiangfapiao_zhaogangren_com hdr_dom(host) -i ftp.xiaoxiangfapiao.zhaogangren.com
        acl is_ftp_yinpiao_zhaogangren_com hdr_dom(host) -i ftp.yinpiao.zhaogangren.com
        acl is_ftp_zijin_zhaogangren_com hdr_dom(host) -i ftp.zijin.zhaogangren.com
        acl is_ftp_newcrm_zhaogangren_com hdr_dom(host) -i ftp.newcrm.zhaogangren.com
        acl is_ftp_jinxiangfapiao_zhaogangren_com hdr_dom(host) -i ftp.jinxiangfapiao.zhaogangren.com
        acl is_ftp3_jinxiangfapiao_zhaogangren_com hdr_dom(host) -i ftp3.jinxiangfapiao.zhaogangren.com




	# level 3
        acl is_dingzha_zhaogang_com hdr_dom(host) -i dingzha.zhaogang.com
        acl is_bi_zhaogang_la hdr_dom(host) -i bi.zhaogang.la
	acl is_backend_pangmaobao_com  hdr_dom(host) -i backend.pangmaobao.com

	acl is_cat_izhaogang_com  hdr_dom(host) -i cat.izhaogang.com
	acl is_arch_doc_izhaogang_com  hdr_dom(host) -i arch.doc.izhaogang.com
        acl is_processing_zhaogang_com hdr_dom(host) -i processing.zhaogang.com  
	acl is_cc_zhaogangren_com hdr_dom(host) -i cc.zhaogangren.com
	acl is_finance_cangchu360_com hdr_dom(host) -i finance.cangchu360.com

        acl is_tstms_zhaogangren_com hdr_dom(host) -i tstms.zhaogangren.com
        acl is_led_zhaogangren_com hdr_dom(host) -i led.zhaogangren.com



        acl is_ims_zhaogangren_com hdr_dom(host) -i ims.zhaogangren.com
        acl is_webresource_zhaogang_com hdr_dom(host) -i webresource.zhaogang.com
        acl is_intlerp_steelsearcher_com hdr_dom(host) -i intlerp.steelsearcher.com



#########################
####  redirect zone #####
#########################




#        acl is_onlinepay_interest_zhaogangren_com hdr_dom(host) -i onlinepay.interest.zhaogangren.com
#        acl is_onlinepay_interest_zhaogangren_com path_beg -i /interest.pay.onlinepay.api/
#---------------------------------------------------------------------
# main backends 
#---------------------------------------------------------------------
	# level 5 
	use_backend processing_order_warehouse_zhaogangren_com if is_processing_order_warehouse_zhaogangren_com
	use_backend module_common_domain_zhaogang_com if is_module_common_domain_zhaogang_com
        use_backend api_processoms_wp_zhaogang_com if is_api_processoms_wp_zhaogang_com
        use_backend api_creditaudit_finance_zhaogang_com if is_api_creditaudit_finance_zhaogang_com
	use_backend socialwarehouse_ui_warehouse_zhaogangren_com if is_socialwarehouse_ui_warehouse_zhaogangren_com
	use_backend socialwarehouse_service_warehouse_zhaogangren_com if is_socialwarehouse_service_warehouse_zhaogangren_com
        use_backend trading_sales_zhaogangren_com if is_trading_sales_zhaogangren_com
        use_backend maven_zhaogangren_com_nexus if is_maven_zhaogangren_com_nexus
	use_backend api_config_arch_zhaogangren_com if is_api_config_arch_zhaogangren_com
	use_backend cloud_finance_warehouse_zgcorp_zg if is_cloud_finance_warehouse_zgcorp_zg
        use_backend wms_supplierchain_domain_zhaogang_com if is_wms_supplierchain_domain_zhaogang_com
        use_backend wms_supplierchain_application_zhaogang_com if is_wms_supplierchain_application_zhaogang_com
        use_backend cache_common_application_zhaogang_com if is_cache_common_application_zhaogang_com
        use_backend module_common_application_zhaogang_com if is_module_common_application_zhaogang_com
        use_backend cache_common_domain_zhaogang_com if is_cache_common_domain_zhaogang_com
        use_backend api_notification_monitor_zhaogang_com if is_api_notification_monitor_zhaogang_com
        use_backend manager_iou_fund_pangmaobao_com if is_manager_iou_fund_pangmaobao_com




	# level 4 
	use_backend notify_arch_zgcorp_zg  if is_notify_arch_zgcorp_zg
	use_backend baseinfo_warehouse_zhaogangren_com if is_baseinfo_warehouse_zhaogangren_com
	use_backend seclog_arch_zhaogangren_com if is_seclog_arch_zhaogangren_com
	use_backend baseinfo_warehouse_zgcorp_zg if is_baseinfo_warehouse_zgcorp_zg
	use_backend tinyq_arch_zhaogangren_com  if is_tinyq_arch_zhaogangren_com
	use_backend config_arch_zhaogangren_com  if is_config_arch_zhaogangren_com
        use_backend api_jiagong_zhaogang_com if is_api_jiagong_zhaogang_com
        use_backend processing_jiagong_zhaogang_com if is_processing_jiagong_zhaogang_com
        use_backend wms_webresource_zhaogang_com if is_wms_webresource_zhaogang_com
	use_backend soa_logistics_zgcorp_zg if is_soa_logistics_zgcorp_zg
        use_backend processoms_wp_zhaogang_com if is_processoms_wp_zhaogang_com
        use_backend app_data_zhaogang_com if is_app_data_zhaogang_com
        use_backend creditaudit_finance_zhaogang_com if is_creditaudit_finance_zhaogang_com
        use_backend tstms_zhaogangren_com if is_tstms_zhaogangren_com
        use_backend ims_zhaogangren_com if is_ims_zhaogangren_com
        use_backend crm_logistics_zhaogangren_com if is_crm_logistics_zhaogangren_com
        use_backend truckcenter_logistics_zhaogangren_com if is_truckcenter_logistics_zhaogangren_com
        use_backend log_arch_zhaogangren_com  if is_log_arch_zhaogangren_com
        #use_backend logquery_ops_zhaogangren_com   if is_logquery_ops_zhaogangren_com 
        use_backend job_arch_zhaogangren_com  if is_job_arch_zhaogangren_com
	use_backend support_zhaogangren_com if is_support_zhaogangren_com
	use_backend analyticslog_arch_zhaogangren_com if is_analyticslog_arch_zhaogangren_com
        use_backend analytics_arch_zhaogang_com if is_analytics_arch_zhaogang_com
	use_backend portal_warehouse_zhaogangren_com  if is_portal_warehouse_zhaogangren_com
	use_backend authentication_logistics_zgcorp_zg if is_authentication_logistics_zgcorp_zg
        use_backend crm_wp_zhaogang_com if is_crm_wp_zhaogang_com
        use_backend wms_api_zhaogang_com if is_wms_api_zhaogang_com
        use_backend api_wp_zhaogang_com_innersso if is_api_wp_zhaogang_com_innersso
        use_backend api_wp_zhaogang_com_sso if is_api_wp_zhaogang_com_sso
        use_backend wms_supplierchain_zhaogang_com if is_wms_supplierchain_zhaogang_com
        use_backend rc_soa_zhaogang_com if is_rc_soa_zhaogang_com
        use_backend job_cloud_zhaogangren_com if is_job_cloud_zhaogangren_com
        use_backend trade_mq_zhaogang_com if is_trade_mq_zhaogang_com
        use_backend ftp_oms_zhaogangren_com if is_ftp_oms_zhaogangren_com
        use_backend oms_zhaogangren_com if is_oms_zhaogangren_com
        use_backend ftp_loaning_zhaogangren_com if is_ftp_loaning_zhaogangren_com
        use_backend ftp_qualityassurance_zhaogangren_com if is_ftp_qualityassurance_zhaogangren_com
        use_backend ftp_warehouse_zhaogangren_com if is_ftp_warehouse_zhaogangren_com
        use_backend ftp_match_upload_zhaogangren_com if is_ftp_match_upload_zhaogangren_com
        use_backend ftp_portal_zhaogangren_com if is_ftp_portal_zhaogangren_com
        use_backend ftp_resparse_zhaogangren_com if is_ftp_resparse_zhaogangren_com
        use_backend ftp_WarehouseProcessOMS_zhaogangren_com if is_ftp_WarehouseProcessOMS_zhaogangren_com
        use_backend ftp_xiaoxiangfapiao_zhaogangren_com if is_ftp_xiaoxiangfapiao_zhaogangren_com
        use_backend ftp_yinpiao_zhaogangren_com if is_ftp_yinpiao_zhaogangren_com
        use_backend ftp_zijin_zhaogangren_com if is_ftp_zijin_zhaogangren_com
        use_backend ftp_newcrm_zhaogangren_com if is_ftp_newcrm_zhaogangren_com
        use_backend ftp_jinxiangfapiao_zhaogangren_com if is_ftp_jinxiangfapiao_zhaogangren_com
        use_backend ftp3_jinxiangfapiao_zhaogangren_com if is_ftp3_jinxiangfapiao_zhaogangren_com




	# level 3 
        use_backend led_zhaogangren_com if is_led_zhaogangren_com
        #use_backend led_zhaogangren_com if is_led_zhaogangren_com is_websocket
        use_backend dingzha_zhaogang_com if is_dingzha_zhaogang_com
        use_backend bi_zhaogang_la if is_bi_zhaogang_la
        use_backend backend_pangmaobao_com if  is_backend_pangmaobao_com

        use_backend cat_izhaogang_com if  is_cat_izhaogang_com
        use_backend arch_doc_izhaogang_com if  is_arch_doc_izhaogang_com
        use_backend processing_zhaogang_com if is_processing_zhaogang_com
	use_backend cc_zhaogangren_com if is_cc_zhaogangren_com
	use_backend finance_cangchu360_com if is_finance_cangchu360_com
        use_backend webresource_zhaogang_com if is_webresource_zhaogang_com
        use_backend intlerp_steelsearcher_com if is_intlerp_steelsearcher_com


 #       use_backend onlinepay_interest_zhaogangren_com if is_onlinepay_interest_zhaogangren_com


  userlist list_ha
    user  zg  insecure-password zgha

backend log_arch_zhaogangren_com

  acl auth_ok http_auth(list_ha)
  acl del method DELETE
  acl is_pathbeg_config  url_reg  .*\/config\/.*

  acl is_pathbeg_mapping url_reg  .*\/_mapping\/field\/.*
  acl is_pathbeg_index_application path_reg  /index-pattern/application
  acl is_pathbeg_index url_reg  .*\/index-pattern\/.*

  http-request allow if is_pathbeg_config  auth_ok
  http-request auth  if is_pathbeg_config 


  http-request allow if is_pathbeg_mapping auth_ok
  http-request auth  if is_pathbeg_mapping 

  http-request allow if is_pathbeg_index_application   auth_ok
  http-request auth  if is_pathbeg_index_application


  http-request allow if is_pathbeg_index del  auth_ok
  http-request auth  if is_pathbeg_index del

  balance roundrobin
  cookie SERVERID insert nocache indirect
  option httpchk GET /elasticsearch/.kibana  HTTP/1.1\r\nHost:\ log.arch.zhaogangren.com
  option httpclose
  option forwardfor
  server 10-80-20-15 10.80.20.15:5600 cookie 10-80-20-15 check inter 1500 rise 3 fall 3
  server 10-80-20-16 10.80.20.16:5600 cookie 10-80-20-16 check inter 1500 rise 3 fall 3
  server 10-80-20-17 10.80.20.17:5600 cookie 10-80-20-17 check inter 1500 rise 3 fall 3
  #server 10-80-20-222 10.80.20.222:5600 cookie 10-80-20-222 check inter 1500 rise 3 fall 3
  #server 10-80-20-223 10.80.20.223:5600 cookie 10-80-20-223 check inter 1500 rise 3 fall 3
  #server 10-80-20-224 10.80.20.224:5600 cookie 10-80-20-224 check inter 1500 rise 3 fall 3

backend notify_arch_zgcorp_zg
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /health HTTP/1.1\r\nHost:\  notify.arch.zgcorp.zg
        option httpclose
        option httplog
        option forwardfor
        server server023056 10.80.23.56:80 cookie server023056 check inter 1500 rise 3 fall 3
        server server023113 10.80.23.113:80 cookie server023113 check inter 1500 rise 3 fall 3
        server server017079 10.80.17.79:80 cookie server017079 check inter 1500 rise 3 fall 3

backend ftp_oms_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.oms.zhaogangren.com
        option httpclose
        option forwardfor
        server sverp  10.80.16.240:80 cookie sverp  check inter 1500 rise 3 fall 3


backend ftp_match_upload_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.match_upload.zhaogangren.com
        option httpclose
        option forwardfor
        server svmatch  10.80.16.240:5120 cookie svmatch  check inter 1500 rise 3 fall 3

backend ftp_portal_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.portal.zhaogangren.com
        option httpclose
        option forwardfor
        server svportal  10.80.16.240:9120 cookie svportal  check inter 1500 rise 3 fall 3



backend ftp_loaning_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.loaning.zhaogangren.com
        option httpclose
        option forwardfor
        server svloaning  10.80.16.240:7120 cookie svfloanig  check inter 1500 rise 3 fall 3

backend ftp_qualityassurance_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.qualityassurance.zhaogangren.com
        option httpclose
        option forwardfor
        server svqualityassurance  10.80.16.240:4120 cookie svqualityassurance  check inter 1500 rise 3 fall 3

backend ftp_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.warehouse.zhaogangren.com
        option httpclose
        option forwardfor
        server svwarehouse  10.80.16.240:19120 cookie svwarehouse  check inter 1500 rise 3 fall 3

backend ftp_resparse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.resparse.zhaogangren.com
        option httpclose
        option forwardfor
        server svresparse  10.80.16.240:15120 cookie svresparse  check inter 1500 rise 3 fall 3

backend ftp_WarehouseProcessOMS_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.WarehouseProcessOMS.zhaogangren.com
        option httpclose
        option forwardfor
        server svwarehouseOMS  10.80.16.240:17120 cookie svwarehouseOMS  check inter 1500 rise 3 fall 3

backend ftp_xiaoxiangfapiao_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.xiaoxiangfapiao.zhaogangren.com
        option httpclose
        option forwardfor
        server svxiaoxiangfapiao  10.80.16.240:18120 cookie svxiaoxiangfapiao  check inter 1500 rise 3 fall 3

backend ftp_yinpiao_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.yinpiao.zhaogangren.com
        option httpclose
        option forwardfor
        server svyinpiao  10.80.16.240:13131 cookie svyinpiao  check inter 1500 rise 3 fall 3

backend ftp_zijin_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.zijin.zhaogangren.com
        option httpclose
        option forwardfor
        server svzijin  10.80.16.240:13001 cookie svzijin  check inter 1500 rise 3 fall 3

backend ftp_newcrm_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.newcrm.zhaogangren.com
        option httpclose
        option forwardfor
        server svnewcrm  10.80.16.240:8091 cookie svnewcrm  check inter 1500 rise 3 fall 3

backend ftp_jinxiangfapiao_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp.jinxiangfapiao.zhaogangren.com
        option httpclose
        option forwardfor
        server svjinxiangfapiao  10.80.16.240:13120 cookie svjinxiangfapiao  check inter 1500 rise 3 fall 3

backend ftp3_jinxiangfapiao_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
    #    option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ftp3.jinxiangfapiao.zhaogangren.com
        option httpclose
        option forwardfor
        server svjinxiangfapiao3  10.80.0.140:13120 cookie svjinxiangfapiao3  check inter 1500 rise 3 fall 3


backend processing_order_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ processing.order.warehouse.zhaogangren.com
        option httpclose
        option forwardfor
        server server021031  10.80.21.31:8080 cookie  server021031  check inter 1500 rise 3 fall 3
        server server021077  10.80.21.77:8080 cookie  server021077  check inter 1500 rise 3 fall 3
        server server021127  10.80.21.127:8080 cookie  server021127  check inter 1500 rise 3 fall 3


backend manager_iou_fund_pangmaobao_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ manager.iou.fund.pangmaobao.com
        option httpclose
        option httplog
        option forwardfor
        server fund.47 10.80.18.47:8080 cookie fund.47 check inter 1500 rise 3 fall 3
        server fund.118 10.80.18.118:8080 cookie fund.118 check inter 1500 rise 3 fall 3
        server fund.115 10.80.17.115:8080 cookie fund.115 check inter 1500 rise 3 fall 3


backend portal_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ portal.warehouse.zhaogangren.com
        option httpclose
        option forwardfor
        server 10.80.20.118  10.80.20.118:8080 cookie 10.80.20.118  check inter 1500 rise 3 fall 3
        server 10.80.20.119  10.80.20.119:8080 cookie 10.80.20.119  check inter 1500 rise 3 fall 3

backend seclog_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ seclog.arch.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        #server server2187 10.80.21.87:5600 cookie server2187 check inter 1500 rise 3 fall 3
        #server server2188 10.80.21.88:5600 cookie server2188 check inter 1500 rise 3 fall 3
        #server server2189 10.80.21.89:5600 cookie server2189 check inter 1500 rise 3 fall 3
        server server009068 10.90.9.68:5600 cookie server009068 check inter 1500 rise 3 fall 3
        server server009069 10.90.9.69:5600 cookie server009069 check inter 1500 rise 3 fall 3




backend baseinfo_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ baseinfo.warehouse.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server server021062 10.80.21.62:8080 cookie server021062 check inter 1500 rise 3 fall 3
        server server021076 10.80.21.76:8080 cookie server021076 check inter 1500 rise 3 fall 3
        server server0210141 10.80.21.141:8080 cookie server0210141 check inter 1500 rise 3 fall 3

backend tinyq_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ tinyq.arch.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_20_211 10.80.20.211:80 cookie 10_80_20_211 check inter 1500 rise 3 fall 3
        server 10_80_20_212 10.80.20.212:80 cookie 10_80_20_212 check inter 1500 rise 3 fall 3            


backend config_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ config.arch.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server config1 10.0.3.103:8080 cookie config1 check inter 1500 rise 3 fall 3
        server config2 10.0.3.104:8080 cookie config2 check inter 1500 rise 3 fall 3            

backend baseinfo_warehouse_zgcorp_zg
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ baseinfo.warehouse.zgcorp.zg
        option httpclose
        option forwardfor
        server warehouse_baseinfo_14 10.80.21.14:8080 cookie warehouse_baseinfo_14 inter 1500 rise 3 fall 3
        server warehouse_baseinfo_50 10.80.21.50:8080 cookie warehouse_baseinfo_50 inter 1500 rise 3 fall 3
        server warehouse_baseinfo_124 10.80.21.124:8080 cookie warehouse_baseinfo_124 inter 1500 rise 3 fall 3


backend finance_cangchu360_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /welcome.html HTTP/1.1\r\nHost:\ finance.cangchu360.com
        option httpclose
        option forwardfor
        server 10_80_20_150 10.80.20.150:8080 cookie 10_80_20_150 check inter 1500 rise 3 fall 3
        server 10_80_20_162 10.80.20.162:8080 cookie 10_80_20_162 check inter 1500 rise 3 fall 3
        server 10_80_16_49 10.80.16.49:8080 cookie 10_80_16_49 check inter 1500 rise 3 fall 3

backend api_jiagong_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /processing/check.txt HTTP/1.1\r\nHost:\ api.jiagong.zhaogang.com
        option httpclose
	option httplog
        option forwardfor
        server 10_80_11_160 10.80.11.160:80 cookie 10_80_11_160 check inter 1500 rise 3 fall 3
        server 10_80_11_161 10.80.11.161:80 cookie 10_80_11_161 check inter 1500 rise 3 fall 3


backend processing_jiagong_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /ui/check.txt HTTP/1.1\r\nHost:\ processing.jiagong.zhaogang.com
        option httpclose
	option httplog
        option forwardfor
       # server 10_0_0_153 10.0.0.153:80 cookie 10_0_0_153 check inter 1500 rise 3 fall 3
        server 10_80_11_169 10.80.11.169:80 cookie 10_80_11_169 check inter 1500 rise 3 fall 3
        server 10_80_11_170 10.80.11.170:80 cookie 10_80_11_170 check inter 1500 rise 3 fall 3

backend bi_zhaogang_la
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /analytics HTTP/1.1\r\nHost:\ bi.zhaogang.la
        option httpclose
	option httplog
        option forwardfor
        #server bi 10.0.0.123:9704 cookie gcxx check inter 1500 rise 3 fall 3
        server 10-80-20-135 10.80.20.135:9704 cookie 10-80-20-135 check inter 1500 rise 3 fall 3

backend wms_webresource_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ wms.webresource.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server wms1 10.80.11.169:80 cookie wms1 check inter 1500 rise 3 fall 3
	server wms2 10.80.11.170:80 cookie wms2 check inter 1500 rise 3 fall 3       

backend dingzha_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ dingzha.zhaogang.com
        option httpclose
	option httplog
        option forwardfor
        server srvzbdingzha 10.0.0.45:80 cookie srvzbdingzha check inter 1500 rise 3 fall 3	



#backend onlinepay_interest_zhaogangren_com
#        balance roundrobin
#        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /interest.pay.onlinepay.api/index.jsp HTTP/1.1\r\nHost:\ onlinepay.interest.zhaogangren.com
#        option httpclose
#        option forwardfor
#        server 10_90_8_116 10.90.8.116:8080 cookie 10_90_8_116 check inter 1500 rise 3 fall 3
#        server 10_90_8_117 10.90.8.117:8080 cookie 10_90_8_117 check inter 1500 rise 3 fall 3
#        server 10_90_8_118 10.90.8.118:8080 cookie 10_90_8_118 check inter 1500 rise 3 fall 3

backend job_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ job.arch.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-16-24 10.80.16.24:80 cookie 10-80-16-24 check inter 1500 rise 3 fall 3
        server 10-80-16-27 10.80.16.27:80 cookie 10-80-16-27 check inter 1500 rise 3 fall 3


backend authentication_logistics_zgcorp_zg
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ authentication.logistics.zgcorp.zg
        option httpclose
        option forwardfor
        server 10_90_8_129 10.90.8.129:8080 cookie 10_90_8_129 check inter 1500 rise 3 fall 3
        server 10_90_8_130 10.90.8.130:8080 cookie 10_90_8_130 check inter 1500 rise 3 fall 3


backend soa_logistics_zgcorp_zg
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /soa/check.txt  HTTP/1.1\r\nHost:\ soa.logistics.zgcorp.zg
        option httpclose
        option forwardfor
        server 10_90_8_160 10.90.8.160:8080 cookie 10_90_8_160 check inter 1500 rise 3 fall 3
        server 10_90_8_161 10.90.8.161:8080 cookie 10_90_8_161 check inter 1500 rise 3 fall 3
        server 10_90_8_162 10.90.8.162:8080 cookie 10_90_8_162 check inter 1500 rise 3 fall 3
        server 10_90_8_172 10.90.8.172:8080 cookie 10_90_8_172 check inter 1500 rise 3 fall 3
        server 10_90_8_173 10.90.8.173:8080 cookie 10_90_8_173 check inter 1500 rise 3 fall 3
        server 10_90_8_174 10.90.8.174:8080 cookie 10_90_8_174 check inter 1500 rise 3 fall 3

backend cloud_finance_warehouse_zgcorp_zg
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /warehouse.cloud.finance.api/index.jsp HTTP/1.1\r\nHost:\ cloud.finance.warehouse.zgcorp.zg
        option httpclose
        option forwardfor
        server 10_80_8_33 10.80.8.33:8080 cookie 10_80_8_33 check inter 1500 rise 3 fall 3
        server 10_80_8_34 10.80.8.34:8080 cookie 10_80_8_34 check inter 1500 rise 3 fall 3


backend analytics_arch_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ analytics.arch.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10-90-24-234 10.90.24.234:8080 cookie 10-90-24-234 check inter 1500 rise 3 fall 3
        server 10-90-24-117 10.90.24.117:8080 cookie 10-90-24-117 check inter 1500 rise 3 fall 3
        #server 10-80-1-212 10.80.1.212:8080 cookie 10_80_1_212 check inter 1500 rise 3 fall 3
        #server 10-80-1-213 10.80.1.213:8080 cookie 10_80_1_213 check inter 1500 rise 3 fall 3
        #server 10-80-1-106 10.80.1.106:80 cookie 10_80_1_106 check inter 1500 rise 3 fall 3
        #server 10-80-1-107 10.80.1.107:80 cookie 10_80_1_107 check inter 1500 rise 3 fall 3
        #server 10-80-1-108 10.80.1.108:80 cookie 10_80_1_108 check inter 1500 rise 3 fall 3


backend support_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ support.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-0-3-154 10.0.3.154:80 cookie 10-0-3-154 check inter 1500 rise 3 fall 3


backend analyticslog_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ analyticslog.arch.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-20-48 10.80.20.48:80 cookie 10-80-20-48 check inter 1500 rise 3 fall 3


backend socialwarehouse_ui_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD / HTTP/1.1\r\nHost:\ socialwarehouse.ui.warehouse.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-20-88 10.80.20.88:8080 cookie 10-80-20-88 check inter 1500 rise 3 fall 3
        server 10-80-20-89 10.80.20.89:8080 cookie 10-80-20-89 check inter 1500 rise 3 fall 3


backend socialwarehouse_service_warehouse_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD / HTTP/1.1\r\nHost:\ socialwarehouse.service.warehouse.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-20-90 10.80.20.90:80 cookie 10-80-20-90 check inter 1500 rise 3 fall 3
        server 10-80-20-93 10.80.20.93:80 cookie 10-80-20-93 check inter 1500 rise 3 fall 3


backend api_config_arch_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD / HTTP/1.1\r\nHost:\ api.config.arch.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-0-3-113 10.0.3.113:8080 cookie 10-0-3-113 check inter 1500 rise 3 fall 3
        server 10-0-3-115 10.0.3.115:8080 cookie 10-0-3-115 check inter 1500 rise 3 fall 3


backend truckcenter_logistics_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ truckcenter.logistics.zhaogangren.com
        option httpclose
        option forwardfor
        #server 10-80-22-10 10.80.22.10:8080 cookie 10-80-22-10 check inter 1500 rise 3 fall 3
        #server 10-80-22-11 10.80.22.11:8080 cookie 10-80-22-11 check inter 1500 rise 3 fall 3
        server 10_90_8_158  10.90.8.158:8080 cookie 10_90_8_158 check inter 1500 rise 3 fall 3
        server 10_90_8_170  10.90.8.170:8080 cookie 10_90_8_170 check inter 1500 rise 3 fall 3

backend trading_sales_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ trading.sales.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-20-114 10.80.20.114:80 cookie 10-80-20-114 check inter 1500 rise 3 fall 3
        server 10-80-20-115 10.80.20.115:80 cookie 10-80-20-115 check inter 1500 rise 3 fall 3


backend tstms_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ tstms.zhaogangren.com
        option httpclose
        option forwardfor
        server tstms1 10.0.3.149:8080 cookie tstms1 check inter 1500 rise 3 fall 3

backend oms_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt  HTTP/1.1\r\nHost:\ oms.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server 10-80-20-41   10.80.20.41:8080 cookie 10-80-20-41 check inter 1500 rise 3 fall 3
        server 10-80-20-42   10.80.20.42:8080 cookie 10-80-20-42 check inter 1500 rise 3 fall 3
        server 10-80-20-47   10.80.20.47:8080 cookie 10-80-20-47 check inter 1500 rise 3 fall 3


#backend led_zhaogangren_com
#        balance roundrobin
#        option forwardfor
#        timeout queue 5000
#        timeout server 60000
#        timeout connect 60000
#	server led9 10.80.21.9:8080 weight 1 maxconn 10000 check inter 10s 
#	server led33 10.80.21.33:8080 weight 1 maxconn 10000 check inter 10s 

backend led_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        ##option httpchk HEAD /check.txt  HTTP/1.1\r\nHost:\ oms.zhaogangren.com
        option httpchk HEAD /check.txt  HTTP/1.1\r\nHost:\ led.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server led9    10.80.21.9:8080 cookie led check inter 1500 rise 3 fall 3
        server led33   10.80.21.33:8080 cookie led33 check inter 1500 rise 3 fall 3
        #server led61   10.80.21.61:8080 cookie led61 check inter 1500 rise 3 fall 3


backend ims_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ ims.zhaogangren.com
        option httpclose
        option forwardfor
        server 10-80-20-178 10.80.20.178:8080 cookie 10-80-20-178 check inter 1500 rise 3 fall 3
        server 10-80-20-190 10.80.20.190:8080 cookie 10-80-20-190 check inter 1500 rise 3 fall 3


backend crm_logistics_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /statics/css/login.css HTTP/1.1\r\nHost:\ crm.logistics.zhaogangren.com
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ crm.logistics.zhaogangren.com
        option httpclose
        option forwardfor
        #server 10-80-20-20 10.80.20.20:8080 cookie 10-80-20-20 check inter 1500 rise 3 fall 3
        #server 10-80-20-22 10.80.20.22:8080 cookie 10-80-20-22 check inter 1500 rise 3 fall 3
        server 10-90-8-136 10.90.8.136:8080 cookie 10-90-8-136 check inter 1500 rise 3 fall 3
        server 10-90-8-138 10.90.8.138:8080 cookie 10-90-8-138 check inter 1500 rise 3 fall 3


backend cc_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
       # option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ edibridge.zhaogang.com
        option httpclose
        option forwardfor
        #server 10_80_8_105 10.80.8.105:7888 cookie 10_80_8_105 check inter 1500 rise 3 fall 3
        #server 10_80_8_106 10.80.8.106:7888 cookie 10_80_8_106 check inter 1500 rise 3 fall 3
        #server 10-0-3-54 10.0.3.54:7888 cookie 10-0-3-54 check inter 1500 rise 3 fall 3
        #server 10-0-3-55 10.0.3.55:7888 cookie 10-0-3-55 check inter 1500 rise 3 fall 3



backend api_processoms_wp_zhaogang_com
        balance source
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /warehouse.process.oms.service/check.txt  HTTP/1.1\r\nHost:\ api.processoms.wp.zhaogang.com
        option httpclose
        server 10-80-8-61 10.80.8.61:8080 cookie api_oms1 check inter 1500 rise 3 fall 3
        server 10-80-8-62 10.80.8.62:8080 cookie api_oms2 check inter 1500 rise 3 fall 3

backend processoms_wp_zhaogang_com
        balance source
        cookie SERVERID insert nocache indirect
        option httpchk HEAD / HTTP/1.1\r\nHost:\ processoms.wp.zhaogang.com
        option httpclose
        server 10-80-8-51 10.80.8.51:8080 cookie oms1 check inter 1500 rise 3 fall 3
        server 10-80-8-52 10.80.8.52:8080 cookie oms2 check inter 1500 rise 3 fall 3


backend app_data_zhaogang_com
        balance source
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ app.data.zhaogang.com
        option httpclose
        server 10-80-11-20 10.80.11.20:8080 cookie app_data1 check inter 1500 rise 3 fall 3
        #server 10-80-11-12 10.80.0.12:80 cookie app_data2 check inter 1500 rise 3 fall 3


backend backend_pangmaobao_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
#        option httpchk HEAD /#\/signin HTTP/1.1\r\nHost:\ backend.pangmaobao.com
        option httpclose
        option forwardfor
        server 10-80-18-68 10.80.18.68:8080 cookie 10_80_18_68 check inter 1500 rise 3 fall 3
        server 10-80-18-78 10.80.18.78:8080 cookie 10_80_18_78 check inter 1500 rise 3 fall 3

backend cat_izhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
#        option httpchk HEAD /#\/signin HTTP/1.1\r\nHost:\ cat.izhaogang.com
        option httpclose
        option forwardfor
        server 10-80-1-251 10.80.1.251:8080 cookie 10_80_1_251 check inter 1500 rise 3 fall 3
        server 10-80-1-252 10.80.1.252:8080 cookie 10_80_1_252 check inter 1500 rise 3 fall 3
        server 10-80-1-253 10.80.1.253:8080 cookie 10_80_1_253 check inter 1500 rise 3 fall 3

backend arch_doc_izhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
#        option httpchk HEAD /#\/signin HTTP/1.1\r\nHost:\ arch.doc.izhaogang.com
        option httpclose
        option forwardfor
        server 10-0-3-28 10.0.3.28:5000 cookie 10_0_3_28 check inter 1500 rise 3 fall 3

backend processing_zhaogang_com
        balance source
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ processing.zhaogang.com
        option httpclose
        server 10-80-11-169 10.80.11.169:80 cookie app_data1 check inter 1500 rise 3 fall 3
        server 10-80-11-170 10.80.11.170:80 cookie app_data2 check inter 1500 rise 3 fall 3



backend api_creditaudit_finance_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ api.creditaudit.finance.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_11_105 10.80.11.105:80 cookie 10_80_11_105 check inter 1500 rise 3 fall 3
        server 10_80_11_135 10.80.11.135:80 cookie 10_80_11_135 check inter 1500 rise 3 fall 3
        #server 10_0_0_105 10.0.0.105:80 cookie 10_0_0_105 check inter 1500 rise 3 fall 3

backend creditaudit_finance_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ creditaudit.finance.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        option httplog
        option forwardfor
        server 10_80_11_105 10.80.11.105:80 cookie 10_80_11_105 check inter 1500 rise 3 fall 3
        server 10_80_11_135 10.80.11.135:80 cookie 10_80_11_135 check inter 1500 rise 3 fall 3
        #server 10_0_0_105 10.0.0.105:80 cookie 10_0_0_105 check inter 1500 rise 3 fall 3


backend maven_zhaogangren_com_nexus
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ maven.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server 10_0_2_102 10.0.2.102:8081 cookie 10_0_2_102 check inter 1500 rise 3 fall 3

backend crm_wp_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ crm.wp.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server crm_wp1 10.80.1.207:8080 cookie crm_wp1 check inter 1500 rise 3 fall 3
        server crm_wp2 10.80.1.211:8080 cookie crm_wp2 check inter 1500 rise 3 fall 3

backend wms_supplierchain_domain_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ wms.supplierchain.domain.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server domain1 10.80.11.150:80 cookie domain1 check inter 1500 rise 3 fall 3
        server domain2 10.80.11.151:80 cookie domain2 check inter 1500 rise 3 fall 3

backend wms_supplierchain_application_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ wms.supplierchain.application.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server application1 10.80.11.160:80 cookie application1 check inter 1500 rise 3 fall 3
        server application2 10.80.11.161:80 cookie application2 check inter 1500 rise 3 fall 3

backend wms_api_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ wms.api.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server wmsapplication1 10.80.11.160:80  check inter 1500 rise 3 fall 3
        server wmsapplication2 10.80.11.161:80  check inter 1500 rise 3 fall 3

backend api_wp_zhaogang_com_innersso
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /innersso/check.txt HTTP/1.1\r\nHost:\ api.wp.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_1_206 10.80.1.206:80 cookie 10_80_1_206 check inter 1500 rise 3 fall 3
        server 10_80_1_210 10.80.1.210:80 cookie 10_80_1_210 check inter 1500 rise 3 fall 3

backend api_wp_zhaogang_com_sso
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /sso/check.txt HTTP/1.1\r\nHost:\ api.wp.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_1_206 10.80.1.206:80 cookie 10_80_1_206 check inter 1500 rise 3 fall 3
        server 10_80_1_210 10.80.1.210:80 cookie 10_80_1_210 check inter 1500 rise 3 fall 3

backend wms_supplierchain_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ wms.supplierchain.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_11_170  10.80.11.170:80 cookie 10_80_11_170 check inter 1500 rise 3 fall 3
        server 10_80_11_169  10.80.11.169:80 cookie 10_80_11_169 check inter 1500 rise 3 fall 3

backend cache_common_application_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ cache.common.application.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server application1 10.80.11.160:80 cookie application1 check inter 1500 rise 3 fall 3
        server application2 10.80.11.161:80 cookie application2 check inter 1500 rise 3 fall 3

backend module_common_application_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ module.common.application.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server application1 10.80.11.160:80 cookie application1 check inter 1500 rise 3 fall 3
        server application2 10.80.11.161:80 cookie application2 check inter 1500 rise 3 fall 3

backend module_common_domain_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ module.common.domain.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server domain1 10.80.11.150:80 cookie domain1 check inter 1500 rise 3 fall 3
        server domain2 10.80.11.151:80 cookie domain2 check inter 1500 rise 3 fall 3

backend cache_common_domain_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ cache.common.domain.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server domain1 10.80.11.150:80 cookie domain1 check inter 1500 rise 3 fall 3
        server domain2 10.80.11.151:80 cookie domain2 check inter 1500 rise 3 fall 3

backend rc_soa_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ rc.soa.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10_80_1_190 10.80.1.190:80 cookie 10_80_1_190 check inter 1500 rise 3 fall 3
        server 10_80_1_191 10.80.1.191:80 cookie 10_80_1_191 check inter 1500 rise 3 fall 3
        server 10_80_1_192 10.80.1.192:80 cookie 10_80_1_192 check inter 1500 rise 3 fall 3
        server 10_80_1_193 10.80.1.193:80 cookie 10_80_1_193 check inter 1500 rise 3 fall 3


backend job_cloud_zhaogangren_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /jobui/check.txt HTTP/1.1\r\nHost:\ job.cloud.zhaogangren.com
        option httpclose
        option httplog
        option forwardfor
        server cloud112 10.80.8.112:80 cookie cloud112 check inter 1500 rise 3 fall 3
        server cloud114 10.80.8.114:80 cookie cloud114 check inter 1500 rise 3 fall 3


backend api_notification_monitor_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ api.notification.monitor.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server 10-80-1-204 10.80.1.204:80 cookie monitor1 check inter 1500 rise 3 fall 3
        server 10-80-1-205 10.80.1.205:80 cookie monitor1 check inter 1500 rise 3 fall 3

backend webresource_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ webresource.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server ui1 10.80.11.170:80 cookie ui1 check inter 1500 rise 3 fall 3
        server ui2 10.80.11.169:80 cookie ui2 check inter 1500 rise 3 fall 3


backend intlerp_steelsearcher_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ intlerp.steelsearcher.com
        option httpclose
        option httplog
        option forwardfor
        server intlerp1 10.8.113.105:8080 cookie intlerp1 check inter 1500 rise 3 fall 3
        server intlerp2 10.8.115.209:8080 cookie intlerp2 check inter 1500 rise 3 fall 3

backend trade_mq_zhaogang_com
        balance roundrobin
        cookie SERVERID insert nocache indirect
        #option httpchk HEAD /check.txt HTTP/1.1\r\nHost:\ trade.mq.zhaogang.com
        option httpclose
        option httplog
        option forwardfor
        server mq1 10.80.8.100:15672 cookie mq1 check inter 1500 rise 3 fall 3


listen  dingzha.zhaogang.com:8060
        bind *:8060
        mode tcp
        balance roundrobin
        server 10_0_0_45 10.0.0.45:8060 check


listen  wmsremoting.izhaogang.com:9104
        bind *:9104
        mode tcp
        balance source
        server 10-80-11-34 10.80.11.34:9104 weight 1 maxconn 1000 check inter 10s
        server 10-80-11-44 10.80.11.44:9104 weight 1 maxconn 1000 check inter 10s

listen  wmsliveupdate.izhaogang.com:9105
        bind *:9105
        mode tcp
        balance source 
        server 10-80-11-34 10.80.11.34:9105 weight 1 maxconn 1000 check inter 10s
        server 10-80-11-44 10.80.11.44:9105 weight 1 maxconn 1000 check inter 10s


listen admin_stat                   #status
    bind *:8070                     #监听端口
    mode http                       #http的7层模式
    stats refresh 30s               #统计页面自动刷新时间
    stats uri /haproxy-stats        #统计页面URL
    stats realm Haproxy\ Statistics #统计页面密码框上提示文本
    stats auth admin:zgha          #统计页面用户名和密码设置
    stats hide-version              #隐藏统计页面上HAProxy的版本信息
    stats admin if TRUE             #手工启用/禁用,后端服务器


